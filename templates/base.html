<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{% block title %}{{ config.html.title_prefix }}{% endblock %}</title>

        <!-- CSS Imports -->
        {% block css %}
        <link rel="stylesheet" href="static/css/plume-all.css" />
        <link rel="stylesheet" href="static/css/plume-theme-default.css" />
        <link rel="stylesheet" href="static/css/flexboxgrid.min.css" />
        <!-- DataTables CSS -->
        <link rel="stylesheet" href="static/css/dataTables.dataTables.min.css" />
        <link rel="stylesheet" href="static/css/dataTables.bootstrap4.min.css" />
        <!-- Custom Neuron Page CSS -->
        <link rel="stylesheet" href="static/css/neuron-page.css" />
        {% endblock %}

        {% block extra_head %}{% endblock %}
    </head>
    <body class="plume">
        {% block header %}{% endblock %}

        <div class="container">
            {% block content %}{% endblock %}
        </div>

        {% block footer %}{% endblock %}

        <!-- Base scripts that all pages need -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                console.log('Mobile menu script initializing...');
                
                const mobileMenuToggle = document.getElementById('mobileMenuToggle');
                const navLinks = document.getElementById('navLinks');
                
                if (mobileMenuToggle && navLinks) {
                    console.log('Mobile menu elements found');
                    
                    mobileMenuToggle.addEventListener('click', function(e) {
                        e.stopPropagation();
                        e.preventDefault();
                        
                        const isVisible = navLinks.classList.contains('show');
                        
                        if (isVisible) {
                            navLinks.classList.remove('show');
                        } else {
                            navLinks.classList.add('show');
                        }
                        
                        console.log('Mobile menu toggled. Visible:', !isVisible);
                    });

                    // Close menu when clicking outside
                    document.addEventListener('click', function(e) {
                        if (!mobileMenuToggle.contains(e.target) && !navLinks.contains(e.target)) {
                            navLinks.classList.remove('show');
                        }
                    });

                    // Close menu when window is resized to desktop
                    window.addEventListener('resize', function() {
                        if (window.innerWidth > 768) {
                            navLinks.classList.remove('show');
                        }
                    });
                    
                } else {
                    console.error('Mobile menu elements not found');
                    console.error('Toggle button:', mobileMenuToggle);
                    console.error('Nav links:', navLinks);
                }
            });
        </script>

        {% block extra_scripts %}{% endblock %}
    </body>
</html>
