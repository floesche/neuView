{# Global JavaScript functionality for all pages #}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const feedbackBtn = document.getElementById('feedback-btn');
    if (feedbackBtn) {
        feedbackBtn.addEventListener('click', function(e) {
            e.preventDefault();
            const currentUrl = encodeURIComponent(window.location.href);
            const browser = encodeURIComponent(navigator.userAgent);
            const dataset = encodeURIComponent("{{ config.neuprint.dataset }}");
            const neuviewVersion = encodeURIComponent("{{ git_version }}");
            const snapshotDate = encodeURIComponent("{{ generation_time.strftime('%Y-%m-%d %H:%M') }}");

            const githubUrl = "{{ config.html.github_repo }}/issues/new?template=feedback.yml" +
                "&url=" + currentUrl +
                "&browser=" + browser +
                "&dataset=" + dataset +
                "&neuview-version=" + neuviewVersion +
                "&snapshot-date=" + snapshotDate;

            window.open(githubUrl, '_blank');
        });
    }
});
</script>
